@isTest
    private class VSPR9_AutoGenerateNetworkRecruitmentTest{
        static testMethod void testNetworkRecruitment(){
            Messaging.InboundEmail email  = new Messaging.InboundEmail();
            Messaging.InboundEnvelope env = new Messaging.InboundEnvelope();
            list<account> lstAcnt = new list<account>();
                Id recordtype =[select Id from recordType where Name ='Pending Account' and sObjectType ='Account' limit 1].Id;
                account acc = new account();
                acc.name='test';
                acc.recordTypeId = recordtype;
                acc.email__c='abc@gmail.com';
                acc.Tax_ID__c = '345433589';
                acc.Fax = '223456';
                acc.Phone = '96532';
                acc.shippingStreet = '11US';
                acc.Account_Type__c = 'Business Account';
                acc.Zipcode__c= '01001' ;
                acc.Account_Group_Sub_Type__c='ab';
                Test.StartTest();
                insert acc;
               
                contact con = new contact();
                con.accountid=acc.id;
                con.lastname='xyz';
                con.firstname='rar';
                con.Marketing_Name__c='mat';
                con.npi__c='1851364921';
                con.Salutation = 'Dr.';
                con.Birthdate__c = Date.Parse('5/15/2015');
                con.Phone = '96532';
                con.Degree__c ='OD';
                con.CAQH_ID__c='9999';
                con.Email ='test@123.com';
                con.Date_of_CMS_Medicare_Application_Submiss__c = Date.Today();
                con.Ethnicity__c ='Other';
                con.Medicare_ID_Number__c ='Med11';
                con.Accommodates_Children_0_3_years__c = True;
                con.Accommodates_Children_3_5_years__c = True;
                con.Specializes_in_Hard_to_fit_Contacts__c = True;
                con.Specializes_in_Low_Vision__c = True;
                con.Specializes_in_Vision_Therapy__c = True;
                insert con;
                system.assertNotEquals(con.Email,'test@12345.com');
                
                Contact_Role__c role = new Contact_Role__c();
                role.Account__c = acc.id; 
                role.contact__c  = Con.id;
                role.Type__c  = 'Doctor-Employee';
                role.Start_Date__c = Date.Today();
                insert role;
                
                Network_Recruitment__c net = new Network_Recruitment__c();
                net.npi__c='1851364921';
                net.Recruitment_Type__c='Doctor Initiated';
                net.Recruitment_Status__c = 'New Lead';
                net.Doctor_id__c='12345';
                net.Additional_Office_Locations__c ='11234 Arizona Phoenix A38 11234';
                net.Contact_Role__c = role.id;
                net.ownerId = userInfo.getUserId();
                insert net;
                system.assertEquals(net.Recruitment_Status__c,'New Lead');
                system.assertEquals(net.Recruitment_Type__c,'Doctor Initiated');
                
                task t = new task();
                t.whatID =net.id;
                t.Subject ='Duplicate VSP  Doctor Request Submitted';
                t.Type ='Outbound Call';
                t.Status = 'Not Started';
                t.Priority ='Normal';
                t.ActivityDate =Date.Today() + 7; 
                t.ReminderDateTime =DateTime.Now().addHours(48);
                t.OwnerId  = net.ownerId;
                insert t;
                
                update acc;
                Test.StopTest();
                
                VSPR9_AutoGenerateNetworkRecruitment autoGen = new VSPR9_AutoGenerateNetworkRecruitment();
                
                env.fromAddress ='myemail@test.com';
                
                string sbody = 'SSN:\n 12345';
                sbody = sbody + 'Office Phone Number:\n 96532';
                sbody = sbody + 'Tax ID:\n 112453';
                sbody = sbody + 'State:\n Arizona';
                sbody = sbody + 'Physical City:\n Phoenix';
                sbody = sbody + 'Practice Name* (IRS Registered Name):\n John';
                sbody = sbody + 'Physical Address:\n 11US';
                sbody = sbody + 'Provider Email:\n <mailto:stevenjohnopticians@hotmail.com> stevenjohnopticians@hotmail.com';
                sbody = sbody + 'NPI Type 1 Number:\n 1851364921';
                sbody = sbody + 'NPI Type 2 Number:\n 1851364921';
                sbody = sbody + 'Office Fax Number:\n 113455';
                sbody = sbody + 'Zip Code:\n  123365';
                sbody = sbody + 'Practice Email (if different from above):\n <mailto:stevenjohnopticians@hotmail.com> stevenjohnopticians@hotmail.com';
                sbody = sbody + 'Last Name:\n lastN';
                sbody = sbody + 'First Name:\n FirstN';
                sbody = sbody + 'Provider Type:\n Doctor';
                sbody = sbody + 'Provider Gender:\n Male';
                sbody = sbody + 'Provider Date of Birth:\n 5/15/2015';
                sbody = sbody + 'If yes, what is your CAQH ID number:\n 9999';
                sbody = sbody + 'Are you: (check all that apply.):\n Employed by Another Doctor';
                sbody = sbody + 'Contact Name:\n ConName';
                sbody = sbody + 'Contact Phone:\n 9871724353';
                sbody = sbody + 'Contact Email:\n <mailto:stevenjohnopticians@hotmail.com> stevenjohnopticians@hotmail.com';
                sbody = sbody + 'Additional Comments:\n CommentsAbove';
                sbody = sbody + 'If yes, please list names of locations/practices:\n millange';
                sbody = sbody + '$3 million aggregate?:\n yes';
                sbody = sbody + 'Are you enrolled with medicare or have you started the enrollment process?:\n yes';
                sbody = sbody + 'What is the business structure?:\n corp crown';
                sbody = sbody + 'What percentage of the practice do you own?:\n 24-30';
                sbody = sbody + 'How many locations do you own?:\n 2';
                sbody = sbody + 'How many frames do you have on display in your dispensary?:\n 50';
                sbody = sbody + 'What percentage of the dispensary do you own?:\n 10';
                sbody = sbody + 'Are contact lenses dispensed at this office?:\n yes';
                sbody = sbody + 'Are you employed at any other locations?:\n yes'; 
                sbody = sbody + 'Ethnicity:\n Other';
                sbody = sbody + 'CMS Application Submission Date:\n 11/11/2015';
                sbody = sbody + 'Spoken Languages:\n Bengali';
                sbody = sbody + 'Medicare:\n Med23';
                sbody = sbody + 'Special Services:\n Specializes in Vision Therapy';
                sbody = sbody + 'Special Services:\n Accommodates Children 0-3 years';
                sbody = sbody + 'Special Services:\n Accommodates Children 3-5 years';
                sbody = sbody + 'Special Services:\n Specializes in Hard-to-fit Contacts';
                sbody = sbody + 'Special Services:\n Specializes in Low Vision';
                sbody = sbody + 'More than 10 VSP locations?:\n Yes';
                sbody = sbody + 'Location 1 Tax ID:\n 11234';
                sbody = sbody + 'Location 1 Physical Office Address:\n A3K';
                sbody = sbody + 'Location 1 City:\n City1';
                sbody = sbody + 'Location 1 State:\n State1';
                sbody = sbody + 'Location 1 Zip:\n 23456';
                sbody = sbody + 'Location 2 Tax ID:\n 11234';
                sbody = sbody + 'Location 2 Physical Office Address:\n A3K';
                sbody = sbody + 'Location 2 City:\n City2';
                sbody = sbody + 'Location 2 State:\n State2';
                sbody = sbody + 'Location 2 Zip:\n 23456';
                sbody = sbody + 'Location 3 Tax ID:\n 11234';
                sbody = sbody + 'Location 3 Physical Office Address:\n A3K';
                sbody = sbody + 'Location 3 City:\n City3';
                sbody = sbody + 'Location 3 State:\n State3';
                sbody = sbody + 'Location 3 Zip:\n 23456';
                sbody = sbody + 'Location 4 Tax ID:\n 11234';
                sbody = sbody + 'Location 4 Physical Office Address:\n A3K';
                sbody = sbody + 'Location 4 City:\n City4';
                sbody = sbody + 'Location 4 State:\n State4';
                sbody = sbody + 'Location 4 Zip:\n 23456';
                sbody = sbody + 'Location 5 Tax ID:\n 11234';
                sbody = sbody + 'Location 5 Physical Office Address:\n A3K';
                sbody = sbody + 'Location 5 City:\n City5';
                sbody = sbody + 'Location 5 State:\n State5';
                sbody = sbody + 'Location 5 Zip:\n 23456';
                sbody = sbody + 'Location 6 Tax ID:\n 11234';
                sbody = sbody + 'Location 6 Physical Office Address:\n A3K';
                sbody = sbody + 'Location 6 City:\n City6';
                sbody = sbody + 'Location 6 State:\n State6';
                sbody = sbody + 'Location 6 Zip:\n 23456';
                sbody = sbody + 'Location 7 Tax ID:\n 11234';
                sbody = sbody + 'Location 7 Physical Office Address:\n A3K';
                sbody = sbody + 'Location 7 City:\n City7';
                sbody = sbody + 'Location 7 State:\n State7';
                sbody = sbody + 'Location 7 Zip:\n 23456';
                sbody = sbody + 'Location 8 Tax ID:\n 11234';
                sbody = sbody + 'Location 8 Physical Office Address:\n A3K';
                sbody = sbody + 'Location 8 City:\n City8';
                sbody = sbody + 'Location 8 State:\n State8';
                sbody = sbody + 'Location 8 Zip:\n 23456';
                sbody = sbody + 'Location 9 Tax ID:\n 11234';
                sbody = sbody + 'Location 9 Physical Office Address:\n A3K';
                sbody = sbody + 'Location 9 City:\n City9';
                sbody = sbody + 'Location 9 State:\n State9';
                sbody = sbody + 'Location 9 Zip:\n 23456';
                sbody = sbody + 'Location 10 Tax ID:\n 11234';
                sbody = sbody + 'Location 10 Physical Office Address:\n A3K';
                sbody = sbody + 'Location 10 City:\n City8';
                sbody = sbody + 'Location 10 State:\n State8';
                sbody = sbody + 'Location 10 Zip:\n 23456';
                
                email.plainTextBody = sbody;
                email.subject = 'Email Test';
                
                VSPR9_AutoGenerateNetworkRecruitment autoGenerateNw = new VSPR9_AutoGenerateNetworkRecruitment();
                Messaging.InboundEmailResult result1 = autoGenerateNw.handleInboundEmail(email, env);
             VSPR19b_RelationshipTypesContactBatch activeNetRelsVC = new VSPR19b_RelationshipTypesContactBatch();
   Database.ExecuteBatch(activeNetRelsVC); 
         }
}